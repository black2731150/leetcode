# 操作系统

## 进程和线程有什么区别？
    - 线程是CPU调度的基本单位，一个进程里面可以有多个线程，但至少有一个线程
    - 进程是操作系统分配资源的最小单位

## 一个进程中有哪些数据段
    - 代码段（Text Segment）
        - 存储程序的执行代码。
        - 通常是只读的，以防止程序意外修改其指令。

    - 数据段（Data Segment）
        - **初始化数据段（Initialized Data Segment）**
            - 存储静态变量，即程序中明确赋值的全局变量和静态变量。
        - **未初始化数据段（Uninitialized Data Segment / BSS Segment）**
            - 存储未初始化的全局变量和静态变量。在程序开始执行之前，通常被初始化为零。

    - 堆段（Heap Segment）
        - 用于动态内存分配，如通过 `malloc`、`calloc`、`new` 等函数分配的内存。
        - 堆的大小不固定，可以在运行时动态增长和缩减。

    - 栈段（Stack Segment）
        - 存储局部变量、函数参数、返回地址及其他与函数调用相关的信息。
        - 栈是后进先出（LIFO）的数据结构，随函数调用而增长，函数返回时缩减。

    - 命令行参数和环境变量
        - 存储程序的命令行参数和环境变量。

    - 动态链接共享库信息
        - 在使用动态链接库的系统中，用于存储库的信息和管理代码。
    
## 同一个进程之间的不同线程之间有哪些数据段是共享的
    - 共享的段
        - 代码段（Text Segment）：所有线程共享同一代码段，因为它们执行相同程序的代码。
        - 数据段（Data Segment）：包括初始化的数据段和未初始化的数据段。这些段中包含的全局变量和静态变量对所有线程来说都是共享的。
        - 堆段（Heap Segment）：动态分配的内存（如通过 malloc、new 等分配的内存）位于堆段，这一部分内存也是由所有线程共享的。
        - 进程的命令行参数和环境变量对所有线程都是共享的。

    - 非共享的段
        - 栈段（Stack Segment）：每个线程有自己的栈，用于存储局部变量、函数调用的上下文等。线程的栈是独立的。
        - 寄存器和程序计数器：每个线程有自己的寄存器集合和程序计数器。

## 内核态和用户态是什么，他们有什么区别
    - 内核态（Kernel Mode） 和 用户态 （User Mode） 是操作系统中两种不容的执行模式，他们主要在于权限级别和能够执行的操作类型上有区别。这两种模式是现代操作系统用来保护系统稳定性和安全性的重要机制。

    - 内核态：
        - 权限：内核态拥有最高的全选。在这个模式下，代码可以直接访问所有的硬件资源和内存。
        - 功能：操作系统的核心部分，比如内核，在内核态下运行，可以执行包括硬件管理，内存管理，任务调度等低等级任务。
        - 安全和稳定性：由于内核态的代码完全控制系统，因此任何错误都可能会导致系统奔溃或安全漏洞。
    
    - 用户态：
        - 权限：用户态拥有较低的权限。在这个模式下，应用程序被限制只能访问被授权的内存区域和有限的硬件资源。
        - 功能：用户级应用程序在用户态运行，如文本编辑及，游戏和其他用户级软件。
        - 安全和稳定性：用户态提供了一个更安全的环境，因为应用程序无法直接访问硬件资源。这降低了一个错误应用程序导致整个系统崩溃的风险。
    
    - 两者的区别：
        - 权限访问：内核态可以访问所有系统的资源，而用户态只能访问有限类型的资源。
        - 切换：当应用程序需要执行一些需要高权限的操作时，比如读写硬盘中的文件，他会通过系统调用切换到内核态。系统调用完成后，再切换回用户态。
        - 安全性：用户态提供了一个相对安全的环境，以防止应用程序干扰系统的正常运行或其他应用程序。
        - 性能：从用户态切换到内核态会有一定的性能开销，因此操作系统设计上努力减少这种切换的频率。